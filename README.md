# `DataAcquisition2.0`
üèÅ For documentation, checkout our [Wiki](https://github.com/DallasFormulaRacing/DataAcquisition2.0/wiki)!

## Objective:
- A Data Acquisition (DAQ) System for interfacing with the vehicle ECU and additional sensors.
- Build the first fully-fledged DAQ with re-usable code through:
    - The Layered Architecture design pattern
    - Modularity of components
    - Hardware abstraction
- Efficiently record data to a CSV file for system testing & refinement of other vehicle components via analyses.
- Make sensor data conveniently accessible for the whole DFR organization.
- To be used in tandem with DFR's [DataAnalyzer](https://github.com/DallasFormulaRacing/DataAnalyzer)

## Firmware Tech Stack
- STM32 Hardware Abstraction Layer (HAL)
  - Generated by STM32CubeMX within the CubeIDE environment, which also provides the `arm-none-eabi` toolchain.
  - Serves as a set of drivers or a Board Support Package (BSP) to interface with the microcontroller.
- FreeRTOS
  - Multi-threading and concurrent programming.
  - For optimizing timing and performance.
- FatFS
  - For maintaining the FAT file system.
  - Allows users to access the resulting CSV file on any device

## Hardware and Equipment
The STM32 Nucleo F429ZI microcontroller development board is used as the current target device for code merge to the `main` and `develop` branches. Theoretically, other Arm Cortex M4 based STM32 devices with the necessary peripherals should be able to run the same program.

<img src="https://www.st.com/bin/ecommerce/api/image.PF262637.en.feature-description-include-personalized-no-cpn-medium.jpg" alt="STM32 Nucleo F429ZI Microcontroller Development Board" width="300">

## Future Plans
- Developing for a dual-core STM32H7 microcontroller.
  - The Cortex M4 core may focus on sampling data from sensors.
  - The Cortex M7 core may focus on outputting the processed data.
  - Both cores may run FreeRTOS for organizational purposes.
  - Both cores may be communicate and synchronize using the OpenAMP framework.

## Deprecated Technologies
Initially, this project ran a program consisting of a simple super loop and interfaced with the hardware using the Mbed framework. This allowed us to focus on building the team knowledge base for developing custom drivers to support sensors. In favor of our long term goals, we have transitioned to supporting the above Firmware Tech Stack for the DAQ.